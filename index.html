<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Ø¯Ø±Ø¯Ø´Ø© Ø®Ø§ØµØ© (Firebase)</title>

<!-- Firebase compat libraries (Ø³Ù†Ø³ØªØ®Ø¯Ù… Ø§Ù„Ù†Ø³Ø®Ø© compat Ù„ØªØ¨Ø³ÙŠØ·) -->
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-storage-compat.js"></script>

<link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Tajawal:wght@300;400;700&display=swap">
<style>
  :root{ --bg:#000; --fg:#fff; --muted:rgba(255,255,255,0.65); --border:rgba(255,255,255,0.12) }
  *{box-sizing:border-box}
  body{margin:0;min-height:100vh;background:var(--bg);color:var(--fg);font-family:"Tajawal",sans-serif;display:flex;justify-content:center;align-items:center;padding:12px;}
  .app{width:100%;max-width:480px;background:#070707;border-radius:12px;border:1px solid var(--border);overflow:hidden;display:flex;flex-direction:column;height:92vh;}
  header{padding:12px;border-bottom:1px solid var(--border);display:flex;justify-content:space-between;align-items:center;}
  header h1{margin:0;font-size:16px}
  main{flex:1;display:flex;flex-direction:column;}
  .messages{flex:1;padding:12px;overflow:auto;display:flex;flex-direction:column;gap:10px;background:linear-gradient(180deg, rgba(255,255,255,0.01), transparent);}
  .msg{max-width:78%;padding:10px;border-radius:10px;border:1px solid var(--border);align-self:flex-end;background:transparent;}
  .msg.other{align-self:flex-start;}
  .meta{font-size:11px;color:var(--muted);margin-top:6px;text-align:right}
  .composer{display:flex;gap:8px;padding:10px;border-top:1px solid var(--border);align-items:center}
  .txt{flex:1;padding:10px;border-radius:10px;border:1px solid var(--border);background:transparent;color:var(--fg)}
  .btn{padding:10px 12px;border-radius:10px;border:1px solid var(--border);background:transparent;color:var(--fg);cursor:pointer}
  .small{padding:8px;border-radius:8px}
  #loginPanel{padding:16px;display:flex;flex-direction:column;gap:8px}
  input[type=file]{display:none}
  .row{display:flex;gap:8px}
  .center{display:flex;align-items:center;gap:8px}
  .note{font-size:12px;color:var(--muted)}
  .toolbar{position:fixed;right:16px;bottom:16px;display:flex;gap:8px}
  audio{width:180px}
  img.preview{max-width:180px;border-radius:8px}
  .hidden{display:none}
</style>
</head>
<body>

<div class="app" id="app">

  <!-- Header -->
  <header>
    <h1>Ø¯Ø±Ø¯Ø´Ø© Ø®Ø§ØµØ© (ID â†” ID)</h1>
    <div id="userInfo" class="note">ØºÙŠØ± Ù…Ø³Ø¬Ù„</div>
  </header>

  <!-- Login / Chat areas -->
  <main>
    <!-- Login panel -->
    <div id="loginPanel">
      <div><strong>ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„</strong></div>
      <input id="loginId" placeholder="ID (Ù…Ø«Ø§Ù„: 1234567)" class="txt">
      <input id="loginPass" placeholder="Password" type="password" class="txt">
      <div class="row">
        <button id="loginBtn" class="btn">Ø¯Ø®ÙˆÙ„ / ØªØ³Ø¬ÙŠÙ„</button>
        <button id="signOutBtn" class="btn hidden">Ø®Ø±ÙˆØ¬</button>
      </div>
      <div class="note">Ø³ÙŠØªÙ… ØªØ­ÙˆÙŠÙ„ ID Ø¥Ù„Ù‰ Ø¨Ø±ÙŠØ¯ Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ Ø¯Ø§Ø®Ù„ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ (Ø¹Ù„Ù‰ Ø³Ø¨ÙŠÙ„ Ø§Ù„Ù…Ø«Ø§Ù„ id@chatapp.local)</div>
    </div>

    <!-- Chat area -->
    <section id="chatPanel" class="hidden" style="display:flex;flex-direction:column;height:100%">
      <div style="padding:10px;border-bottom:1px solid var(--border);display:flex;gap:8px;align-items:center">
        <input id="chatWith" placeholder="Ø§Ø¯Ø®Ù„ ID Ø§Ù„Ø°ÙŠ ØªØ±ÙŠØ¯ Ø§Ù„Ø¯Ø±Ø¯Ø´Ø© Ù…Ø¹Ù‡" class="txt" style="flex:1">
        <button id="startChatBtn" class="btn">ÙØªØ­ Ù…Ø­Ø§Ø¯Ø«Ø©</button>
      </div>

      <div id="messages" class="messages"></div>

      <div class="composer">
        <input id="messageInput" class="txt" placeholder="Ø§ÙƒØªØ¨ Ø±Ø³Ø§Ù„Ø©...">
        <input type="file" id="imageInput" accept="image/*">
        <input type="file" id="fileInput">
        <button id="imgBtn" class="btn small">ØµÙˆØ±Ø©</button>
        <button id="fileBtn" class="btn small">Ù…Ù„Ù</button>
        <button id="recordBtn" class="btn small">ğŸ¤</button>
        <button id="sendBtn" class="btn">Ø¥Ø±Ø³Ø§Ù„</button>
      </div>
    </section>
  </main>
</div>

<!-- main.js -->
<script src="main.js"></script>
</body>
</html>
